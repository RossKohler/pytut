"use strict";angular.module("yapp",["ui.router","ngAnimate","starter.services","ui.ace","angulartics","angulartics.google.analytics","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.when("/dashboard","/dashboard/tasks"),t.state("base",{"abstract":!0,url:"",templateUrl:"views/base.html"}).state("login",{url:"/login",parent:"base",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("dashboard",{url:"/dashboard",parent:"base",templateUrl:"views/dashboard.html",controller:"DashboardCtrl"}).state("tasks",{url:"/tasks",parent:"dashboard",templateUrl:"views/dashboard/tasks.html",controller:"TasksCtrl"}).state("contactus",{url:"/contactus",parent:"dashboard",templateUrl:"views/dashboard/contactus.html"}).state("task1",{url:"/task1",parent:"tasks",templateUrl:"views/tasks/task1.html",controller:"Task1Ctrl"}).state("task2",{url:"/task2",parent:"tasks",templateUrl:"views/tasks/task2.html",controller:"Task1Ctrl"}).state("task3",{url:"/task3",parent:"tasks",templateUrl:"views/tasks/task3.html",controller:"Task1Ctrl"})}]).run(["$location","User",function(t,e){null==e.me()&&t.path("login")}]),angular.module("yapp").controller("LoginCtrl",["$scope","$location","User",function(t,e,o){t.data={code:"",message:""},t.isLoading=!1,t.submit=function(n,a){t.isLoading=!0,o.login(n,a).then(function(n){n.code?(t.$apply(function(){t.isLoading=!1,t.data={code:n.code,message:n.message}}),console.log(n.code),console.log(n.message)):(console.log("DIRECTING TO DASHBOARD"),o.initMyProfile(function(){t.$apply(function(){e.path("/dashboard")})}))})}}]),angular.module("yapp").controller("DashboardCtrl",["$window","Database","$location","User","$scope","$state",function(t,e,o,n,a,r){a.$state=r,a.logout=function(){n.clearMe(),o.path("/login")};var i=e.chat_ref,s=new FirechatUI(i,document.getElementById("firechat-wrapper"));console.log(s);var l=n.me().email.split("@")[0],u="Tutor help ("+n.me().uid.substring(0,3)+")";s.setUser(n.me().uid,l);var c=new Firechat(i,{});"rossdkohler@gmail.com"!=n.me().email&&"carlakirkcohen@gmail.com"!=n.me().email&&(console.log(n.myProfile()),null==n.myProfile().roomId?(console.log("CREATING ROOM"),c.createRoom(u,"private",function(t){c.getUsersByRoom(t,function(e){null==e.PwBPcW13MJfdN9qqbOFvNyGR7yb2&&(c.inviteUser("PwBPcW13MJfdN9qqbOFvNyGR7yb2",t),console.log("Carla Invited")),null==e.xWriKiWWiIUehfZyt1ptQfuJ76A2&&(c.inviteUser("xWriKiWWiIUehfZyt1ptQfuJ76A2",t),console.log("Ross Invited"))}),c.enterRoom(t),n.setRoom(t)})):(console.log("ENTERING EXISTING ROOM"),c.enterRoom(n.myProfile().roomId)))}]),angular.module("yapp").controller("pythonInterpreterCtrl",["Database","$window","$location","User","$scope","$state",function(t,e,o,n,a,r){function i(t){var e=document.getElementById("output");e.innerHTML=e.innerHTML+t}function s(t){if(void 0===l.builtinFiles||void 0===l.builtinFiles.files[t])throw"File not found: '"+t+"'";return l.builtinFiles.files[t]}function i(t){var e=document.getElementById("output");e.innerHTML=e.innerHTML+t}function s(t){if(void 0===l.builtinFiles||void 0===l.builtinFiles.files[t])throw"File not found: '"+t+"'";return l.builtinFiles.files[t]}a.$state=r;var l=e.Sk;a.$state=r;var u,l=e.Sk;a.aceLoaded=function(t){t.setReadOnly(!1),t.setValue("print 10",1),u=t,console.log(u)},a.aceChanged=function(t){},a.debugit=function(){console.log("Debug program")},a.runit=function(){var t=u.getValue(),e=document.getElementById("output");e.innerHTML="",l.pre="output",l.configure({output:i,read:s}),(l.TurtleGraphics||(l.TurtleGraphics={})).target="mycanvas";var o=l.misceval.asyncToPromise(function(){return l.importMainWithBody("<stdin>",!1,t,!0)});o.then(function(t){console.log("success")},function(t){console.log(t.toString());var e=document.getElementById("output");e.innerHTML=e.innerHTML+t}),console.log("+1 to number of runs for analytics")},a.stepIn=function(){console.log("Step into program")},a.chat=function(){console.log("Initiate Chat")},a.mark=function(){console.log("Submit for automatic marking")},a.debugit=function(){console.log("Debug program")},a.runit=function(){var t=a.editor,e=document.getElementById("output");e.innerHTML="",l.pre="output",l.configure({output:i,read:s}),(l.TurtleGraphics||(l.TurtleGraphics={})).target="mycanvas";var o=l.misceval.asyncToPromise(function(){return l.importMainWithBody("<stdin>",!1,t,!0)});o.then(function(t){console.log("success")},function(t){console.log(t.toString())}),console.log("+1 to number of runs for analytics")},a.stepIn=function(){console.log("Step into program")},a.chat=function(){console.log("Initiate Chat")},a.mark=function(){console.log("Submit for automatic marking")}}]),angular.module("yapp").controller("TasksCtrl",["$scope","$state",function(t,e){}]),angular.module("starter.services",[]).factory("Database",function(){var t={apiKey:"AIzaSyAsfClYaSXl30U-Wn2yY7ig6dzBmBVdu6o",authDomain:"pytut-eedf2.firebaseapp.com",databaseURL:"https://pytut-eedf2.firebaseio.com",storageBucket:"pytut-eedf2.appspot.com"};firebase.initializeApp(t);var e=firebase.database();return{db:e,user_ref:e.ref("/users"),chat_ref:e.ref("/chat")}}).factory("User",["Database","$q","$rootScope",function(t,e,o){var n,a;return{me:function(){return n},initMyProfile:function(e){t.user_ref.child(n.uid).on("value",function(t){null!=t.val()&&(a=t.val(),e())})},myProfile:function(){return a},clearMe:function(){n=null},setRoom:function(e){t.user_ref.child(n.uid).update({roomId:e})},login:function(o,a){var r=firebase.auth();if(n)return Promise.resolve(n);e.defer();return r.signInWithEmailAndPassword(o,a).then(function(e){return n=e,t.user_ref.child(n.uid).update({last_seen:firebase.database.ServerValue.TIMESTAMP}),Promise.resolve(e)})["catch"](function(t){return console.error(t),Promise.resolve(t)})}}}]);